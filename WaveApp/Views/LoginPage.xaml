<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WaveApp.Views.LoginPage"
             xmlns:converters="clr-namespace:WaveApp.Converters"
             xmlns:xct="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             BackgroundColor="#0A0E1A"
             Title="Login to WaveForce">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Reuse the same color definitions from Dashboard -->
            <Color x:Key="PrimaryBlue">#00D4FF</Color>
            <Color x:Key="SecondaryBlue">#0099CC</Color>
            <Color x:Key="AccentGreen">#00FF88</Color>
            <Color x:Key="WarningOrange">#FF6B35</Color>
            <Color x:Key="DangerRed">#FF3B30</Color>
            <Color x:Key="DarkBackground">#0A0E1A</Color>
            <Color x:Key="CardBackground">#1A1F2E</Color>
            <Color x:Key="TextPrimary">#FFFFFF</Color>
            <Color x:Key="TextSecondary">#8E9AAF</Color>

            <!-- Gradients -->
            <LinearGradientBrush x:Key="PrimaryGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#00D4FF" Offset="0"/>
                <GradientStop Color="#0099CC" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="EnergyGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#00FF88" Offset="0"/>
                <GradientStop Color="#00CC66" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="CardGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A1F2E" Offset="0"/>
                <GradientStop Color="#242B3D" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="AICardGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A2332" Offset="0"/>
                <GradientStop Color="#243447" Offset="1"/>
            </LinearGradientBrush>

            <!-- Styles specific to login page -->
            <Style x:Key="LoginButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource PrimaryGradient}"/>
                <Setter Property="TextColor" Value="Black"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="HeightRequest" Value="50"/>
                <Setter Property="Margin" Value="0,20,0,0"/>
            </Style>

            <Style x:Key="SocialButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="#1A1F2E"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="FontSize" Value="11" />
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="HeightRequest" Value="50"/>
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Padding" Value="10"/>
            </Style>

            <Style x:Key="EntryStyle" TargetType="Entry">
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="PlaceholderColor" Value="#8E9AAF"/>
                <Setter Property="BackgroundColor" Value="#1A1F2E"/>
                <Setter Property="Margin" Value="0,10"/>
                <Setter Property="HeightRequest" Value="50"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>

            <Style x:Key="ValidationLabelStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource DangerRed}"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="Margin" Value="15,0,0,0"/>
            </Style>

            <Style x:Key="CardStyle" TargetType="Frame">
                <Setter Property="Background" Value="{StaticResource CardGradient}"/>
                <Setter Property="HasShadow" Value="True"/>
                <Setter Property="CornerRadius" Value="16"/>
                <Setter Property="Padding" Value="20"/>
                <Setter Property="Margin" Value="8"/>
            </Style>

            <Style x:Key="TitleStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="FontAttributes" Value="Bold"/>
            </Style>

            <Style x:Key="ValueStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource PrimaryBlue}"/>
                <Setter Property="FontSize" Value="28"/>
                <Setter Property="FontAttributes" Value="Bold"/>
            </Style>

            <Style x:Key="SubtitleStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource TextSecondary}"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>

            <Style x:Key="BuoyCardStyle" TargetType="Frame">
                <Setter Property="Background" Value="{StaticResource CardGradient}"/>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="Padding" Value="12"/>
                <Setter Property="Margin" Value="4"/>
                <Setter Property="HasShadow" Value="True"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid VerticalOptions="Center" 
          HorizontalOptions="Center"
          RowSpacing="0" 
          Padding="20"
          WidthRequest="{OnPlatform Android=800, iOS=800, WinUI=800}"
          MaximumWidthRequest="{OnPlatform Android=9800, iOS=900, WinUI=900}">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- App Logo/Header -->
        <Frame Grid.Row="0" 
               Style="{StaticResource CardStyle}" 
               Background="{StaticResource PrimaryGradient}"
               Margin="0,0,0,30"
               Padding="20"
               HorizontalOptions="FillAndExpand">
            <StackLayout HorizontalOptions="Center">
                <Label Text="âš¡ WaveForce" 
                       FontSize="28" 
                       TextColor="White" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"/>
                <Label Text="Ocean Energy Monitoring" 
                       FontSize="16" 
                       TextColor="White"
                       HorizontalOptions="Center"/>
            </StackLayout>
        </Frame>

        <!-- Login Form -->
        <Frame Grid.Row="1" 
               Style="{StaticResource CardStyle}"
               Padding="20"
               HorizontalOptions="FillAndExpand">
            <StackLayout Spacing="5">
                <Label Text="Welcome Back !" 
                       FontSize="20" 
                       TextColor="{StaticResource TextPrimary}" 
                       FontAttributes="Bold"/>
                <Label Text="Sign in to access your dashboard" 
                       FontSize="14" 
                       TextColor="{StaticResource TextSecondary}"
                       Margin="0,0,0,15"/>

                <!-- Email Field -->
                <Entry Style="{StaticResource EntryStyle}" 
                       Placeholder="Email" 
                       Text="{Binding Email}"
                       Keyboard="Email">
                </Entry>
                <Label Text="Please enter a valid email" 
                       IsVisible="{Binding IsEmailInvalid}"
                       Style="{StaticResource ValidationLabelStyle}"/>

                <!-- Password Field -->
                <Entry Style="{StaticResource EntryStyle}" 
                       Placeholder="Password" 
                       Text="{Binding Password}"
                       IsPassword="True">
                </Entry>
                <Label Text="Password is required" 
                       IsVisible="{Binding IsPasswordInvalid}"
                       Style="{StaticResource ValidationLabelStyle}"/>

                <!-- Forgot Password -->
                <Label Text="Forgot password?" 
                       TextColor="{StaticResource PrimaryBlue}" 
                       HorizontalOptions="End"
                       FontSize="12"
                       Margin="0,5">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}"/>
                    </Label.GestureRecognizers>
                </Label>

                <!-- Login Button -->
                <Button Text="LOGIN" 
                        Style="{StaticResource LoginButtonStyle}"
                        Command="{Binding LoginCommand}"/>

                <!-- Divider -->
                <Grid Margin="0,20" VerticalOptions="Center">
                    <BoxView HeightRequest="1" 
                             Color="{StaticResource TextSecondary}" 
                             Opacity="0.3"
                             VerticalOptions="Center"/>
                    <Label Text="OR CONTINUE WITH:" 
                           TextColor="{StaticResource TextSecondary}" 
                           FontSize="12"
                           BackgroundColor="{StaticResource DarkBackground}"
                           Padding="10,0"
                           HorizontalOptions="Center"/>
                </Grid>
                <Grid RowDefinitions="*" ColumnDefinitions="*,*,*" Margin="0,10">
                    <!-- Google Button -->
                    <Button Grid.Column="0"
                        Style="{StaticResource SocialButtonStyle}"
                        Command="{Binding GoogleLoginCommand}"
                        ImageSource="google.png"
                        Text="Google"
                        ContentLayout="Left,5"/>
                    <!-- Microsoft Button -->
                    <Button Grid.Column="1"
                        Style="{StaticResource SocialButtonStyle}"
                        Command="{Binding MicrosoftLoginCommand}"
                        ImageSource="microsoft.png"
                        Text="MS"
                        ContentLayout="Left,5"/>
                    <!-- Apple Button -->
                    <Button Grid.Column="2"
                        Style="{StaticResource SocialButtonStyle}"
                        Command="{Binding AppleLoginCommand}"
                        ImageSource="apple.png"
                        Text="Apple"
                        ContentLayout="Left,5"/>
                </Grid>
            </StackLayout>
        </Frame>

        <!-- Sign Up Prompt -->
        <StackLayout Grid.Row="3" 
                     Orientation="Horizontal" 
                     HorizontalOptions="Center"
                     VerticalOptions="Center"
                     Margin="0,20">
            <Label Text="Don't have an account?" 
                   TextColor="{StaticResource TextSecondary}"
                   FontSize="14" VerticalTextAlignment="Center"/>
            <Label Text="  Sign Up Here" 
                   TextColor="{StaticResource PrimaryBlue}"
                   FontSize="20"
                   FontAttributes="Bold">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding SignUpCommand}"/>
                </Label.GestureRecognizers>
            </Label>
        </StackLayout>
    </Grid>

</ContentPage>