<?xml version="1.0" encoding="utf-8" ?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WaveApp.Views.DashboardPage"
             xmlns:converters="clr-namespace:WaveApp.Converters"
             BackgroundColor="#0A0E1A"
             Title="Wave Energy Dashboard">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Converters -->
            <converters:ColorNameToColorConverter x:Key="ColorConverter"/>

            <!-- Color Definitions -->
            <Color x:Key="PrimaryBlue">#00D4FF</Color>
            <Color x:Key="SecondaryBlue">#0099CC</Color>
            <Color x:Key="AccentGreen">#00FF88</Color>
            <Color x:Key="WarningOrange">#FF6B35</Color>
            <Color x:Key="DangerRed">#FF3B30</Color>
            <Color x:Key="DarkBackground">#0A0E1A</Color>
            <Color x:Key="CardBackground">#1A1F2E</Color>
            <Color x:Key="TextPrimary">#FFFFFF</Color>
            <Color x:Key="TextSecondary">#8E9AAF</Color>

            <!-- Gradients -->
            <LinearGradientBrush x:Key="PrimaryGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#00D4FF" Offset="0"/>
                <GradientStop Color="#0099CC" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="EnergyGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#00FF88" Offset="0"/>
                <GradientStop Color="#00CC66" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="CardGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A1F2E" Offset="0"/>
                <GradientStop Color="#242B3D" Offset="1"/>
            </LinearGradientBrush>

            <LinearGradientBrush x:Key="AICardGradient" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A2332" Offset="0"/>
                <GradientStop Color="#243447" Offset="1"/>
            </LinearGradientBrush>

            <!-- Styles -->
            <Style x:Key="CardStyle" TargetType="Frame">
                <Setter Property="Background" Value="{StaticResource CardGradient}"/>
                <Setter Property="HasShadow" Value="True"/>
                <Setter Property="CornerRadius" Value="16"/>
                <Setter Property="Padding" Value="20"/>
                <Setter Property="Margin" Value="8"/>
            </Style>

            <Style x:Key="TitleStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="FontAttributes" Value="Bold"/>
            </Style>

            <Style x:Key="ValueStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource PrimaryBlue}"/>
                <Setter Property="FontSize" Value="28"/>
                <Setter Property="FontAttributes" Value="Bold"/>
            </Style>

            <Style x:Key="SubtitleStyle" TargetType="Label">
                <Setter Property="TextColor" Value="{StaticResource TextSecondary}"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>

            <Style x:Key="BuoyCardStyle" TargetType="Frame">
                <Setter Property="Background" Value="{StaticResource CardGradient}"/>
                <Setter Property="CornerRadius" Value="12"/>
                <Setter Property="Padding" Value="12"/>
                <Setter Property="Margin" Value="4"/>
                <Setter Property="HasShadow" Value="True"/>
            </Style>

            <!-- Animations -->
            <!--
            <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                               From="0.7" To="1.0" Duration="0:0:2"
                               AutoReverse="True"/>
            </Storyboard>

            <Storyboard x:Key="SlideInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="TranslationX"
                               From="300" To="0" Duration="0:0:1"/>
            </Storyboard>
            -->
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <Grid Padding="16" RowSpacing="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Frame Grid.Row="0" Style="{StaticResource CardStyle}" Background="{StaticResource PrimaryGradient}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackLayout Grid.Column="0">
                        <Label Text="⚡ WaveForce Energy" Style="{StaticResource TitleStyle}" FontSize="26" TextColor="White"/>
                        <Label Text="🌊 Advanced Ocean Energy Monitoring" Style="{StaticResource SubtitleStyle}" TextColor="White" FontSize="15"/>
                        <Label Text="🕐 Last Update: Live monitoring active" Style="{StaticResource SubtitleStyle}" TextColor="White" Opacity="0.9"/>
                    </StackLayout>
                    <Button Grid.Column="1" 
                            Text="ℹ️" 
                            BackgroundColor="Transparent" 
                            TextColor="White" 
                            FontSize="24"
                            Clicked="OnInfoIconClicked"/>
                </Grid>
            </Frame>

            <!-- Energy Overview Cards -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Frame Grid.Column="0" Style="{StaticResource CardStyle}">
                    <StackLayout>
                        <Label Text="💡 Total Energy Collected" Style="{StaticResource TitleStyle}" FontSize="16"/>
                        <Label Text="{Binding TotalEnergy, StringFormat='{0:F1} kWh'}" Style="{StaticResource ValueStyle}" TextColor="{StaticResource AccentGreen}" FontSize="26"/>
                        <Label Text="{Binding EnergyTrend}" Style="{StaticResource SubtitleStyle}" TextColor="{StaticResource AccentGreen}"/>
                    </StackLayout>
                </Frame>

                <Frame Grid.Column="1" Style="{StaticResource CardStyle}">
                    <StackLayout>
                        <Label Text="⚡ Current Power Output" Style="{StaticResource TitleStyle}" FontSize="16"/>
                        <Label Text="{Binding CurrentPower, StringFormat='{0:F1} kW'}" Style="{StaticResource ValueStyle}" TextColor="{StaticResource PrimaryBlue}" FontSize="26"/>
                        <Label Text="{Binding PowerTrend}" Style="{StaticResource SubtitleStyle}"/>
                    </StackLayout>
                </Frame>
                
            </Grid>

            <!-- Buoy Fleet Status -->
            <Frame Grid.Row="2" Style="{StaticResource CardStyle}">
                <StackLayout>
                    <Grid Margin="0,0,0,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Label Text="🌊 Buoy Fleet Status" Style="{StaticResource TitleStyle}" HorizontalOptions="Start" Grid.Row="0" />
                        <Label Text="{Binding FleetStatusSummary}" Style="{StaticResource SubtitleStyle}" TextColor="{StaticResource AccentGreen}" Grid.Row="1"/>
                        <!--  <Label Text="✅ 5 Active | ⚠️ 1 Maintenance" Style="{StaticResource SubtitleStyle}" TextColor="{StaticResource AccentGreen}" HorizontalOptions="End"/>  -->
                    </Grid>

                    <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*,*,*">
                        <!-- First Row -->
                        <!-- Buoy Alpha (WB-1) -->
                        <Frame Grid.Row="0" Grid.Column="0" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[0].Name, StringFormat='{0} (WB-1)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[0].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[0].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[0].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[0].EfficiencyStatus}" TextColor="{Binding Buoys[0].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>

                        <!-- Buoy Beta (WB-2) -->
                        <Frame Grid.Row="0" Grid.Column="1" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[1].Name, StringFormat='{0} (WB-2)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[1].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[1].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[1].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[1].EfficiencyStatus}" TextColor="{Binding Buoys[1].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>

                        <!-- Buoy Gamma (WB-3) - Maintenance -->
                        <Frame Grid.Row="0" Grid.Column="2" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[2].Name, StringFormat='{0} (WB-3)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[2].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[2].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[2].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[2].EfficiencyStatus}" TextColor="{Binding Buoys[2].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>

                        <!-- Second Row -->
                        <!-- Buoy Delta (WB-4) -->
                        <Frame Grid.Row="1" Grid.Column="0" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[3].Name, StringFormat='{0} (WB-4)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[3].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[3].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[3].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[3].EfficiencyStatus}" TextColor="{Binding Buoys[3].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>

                        <!-- Buoy Echo (WB-5) -->
                        <Frame Grid.Row="1" Grid.Column="1" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[4].Name, StringFormat='{0} (WB-5)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[4].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[4].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[4].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[4].EfficiencyStatus}" TextColor="{Binding Buoys[4].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>

                        <!-- Buoy Foxtrot (WB-6) - Warning -->
                        <Frame Grid.Row="1" Grid.Column="2" Style="{StaticResource BuoyCardStyle}">
                            <StackLayout>
                                <Grid>
                                    <Label Text="{Binding Buoys[5].Name, StringFormat='{0} (WB-6)'}" TextColor="White" FontSize="14" FontAttributes="Bold" HorizontalOptions="Start"/>
                                    <Label Text="{Binding Buoys[5].StatusSymbol}" FontSize="16" HorizontalOptions="End"/>
                                </Grid>
                                <Label Text="{Binding Buoys[5].CurrentEnergy, StringFormat='{0:F1} kWh'}" TextColor="{Binding Buoys[5].StatusColor}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text="{Binding Buoys[5].EfficiencyStatus}" TextColor="{Binding Buoys[5].StatusDetailColor}" FontSize="12"/>
                            </StackLayout>
                        </Frame>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- Performance Analytics Chart -->
            <Frame Grid.Row="3" Style="{StaticResource CardStyle}">
                <StackLayout>
                    <Label Text="📊 Performance Analytics (7 Days)" Style="{StaticResource TitleStyle}" Margin="0,0,0,15"/>
                    <Grid HeightRequest="140" BackgroundColor="#0F1419" Margin="0,10" Padding="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Monday (Column 0) -->
                        <StackLayout Grid.Column="0" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[0].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[0].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[0].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[0].ValueText}" 
                       TextColor="{Binding ChartBars[0].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Tuesday (Column 1) -->
                        <StackLayout Grid.Column="1" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[1].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[1].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[1].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[1].ValueText}" 
                       TextColor="{Binding ChartBars[1].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Wednesday (Column 2) -->
                        <StackLayout Grid.Column="2" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[2].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[2].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[2].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[2].ValueText}" 
                       TextColor="{Binding ChartBars[2].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Thursday (Column 3) -->
                        <StackLayout Grid.Column="3" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[3].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[3].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[3].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[3].ValueText}" 
                       TextColor="{Binding ChartBars[3].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Friday (Column 4) -->
                        <StackLayout Grid.Column="4" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[4].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[4].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[4].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[4].ValueText}" 
                       TextColor="{Binding ChartBars[4].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Saturday (Column 5) -->
                        <StackLayout Grid.Column="5" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[5].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[5].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[5].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[5].ValueText}" 
                       TextColor="{Binding ChartBars[5].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>

                        <!-- Sunday (Column 6) -->
                        <StackLayout Grid.Column="6" VerticalOptions="End" HeightRequest="120">
                            <BoxView BackgroundColor="{Binding ChartBars[6].Color, Converter={StaticResource ColorConverter}}"
                         HeightRequest="{Binding ChartBars[6].Height}"
                         VerticalOptions="End"
                         Margin="2" 
                         CornerRadius="2"/>
                            <Label Text="{Binding ChartBars[6].Day}" 
                       TextColor="{StaticResource TextSecondary}" 
                       FontSize="10" 
                       HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding ChartBars[6].ValueText}" 
                       TextColor="{Binding ChartBars[6].Color, Converter={StaticResource ColorConverter}}"
                       FontSize="10" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"/>
                        </StackLayout>
                    </Grid>
                    <Grid Margin="0,10,0,0">
                        <Label Text="{Binding WeeklyTotalText}" 
                   Style="{StaticResource SubtitleStyle}" 
                   HorizontalTextAlignment="Center" 
                   TextColor="{StaticResource AccentGreen}"/>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- AI Optimization Recommendations -->
            <Frame Grid.Row="4" Style="{StaticResource CardStyle}" Background="{StaticResource AICardGradient}">
                <StackLayout>
                    <Grid Margin="0,0,0,15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="90*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Label Text="🤖 AI Optimization Center" Style="{StaticResource TitleStyle}" HorizontalOptions="Start" Grid.Row="0" />
                        <Label Text="🧠 6 Active Insights ..." Style="{StaticResource SubtitleStyle}" TextColor="{StaticResource PrimaryBlue}" Grid.Row="0" Margin="0,30,0,0" />
                        <Button Text="More" Grid.Row="0" Grid.Column="1" WidthRequest="40" HeightRequest="15" Padding="5" FontSize="10" BackgroundColor="{StaticResource PrimaryBlue}" TextColor="Black" FontAttributes="Bold" TextTransform="Uppercase" Clicked="OnToggleClicked" />
                    </Grid>

                    <StackLayout Spacing="12" IsVisible="{Binding ShowStack1}">
                        <!-- AI Recommendation 1 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource PrimaryBlue}">
                            <StackLayout>
                                <Label Text="🎯 Positioning Optimization" TextColor="{StaticResource PrimaryBlue}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Wave conditions in Zone A show 18% higher energy potential. Consider repositioning Buoy Beta for optimal capture." 
                                       TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="💡 Potential gain: +6.8 kWh/day" TextColor="{StaticResource AccentGreen}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>

                        <!-- AI Recommendation 2 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource AccentGreen}">
                            <StackLayout>
                                <Label Text="🔧 Predictive Maintenance" TextColor="{StaticResource AccentGreen}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Buoy Foxtrot shows declining efficiency. Sensor calibration recommended within 72 hours to prevent 15% energy loss." 
                                       TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="⏰ Schedule maintenance: High priority" TextColor="{StaticResource WarningOrange}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>

                        <!-- AI Recommendation 3 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource WarningOrange}">
                            <StackLayout>
                                <Label Text="🌊 Weather Optimization" TextColor="{StaticResource WarningOrange}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Storm system approaching in 48 hours. High wave activity predicted - adjust safety protocols and expect 25% energy increase." 
                                       TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="⚡ Expected boost: +45 kWh over 3 days" TextColor="{StaticResource AccentGreen}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>
                    </StackLayout>

                    <StackLayout Spacing="12" IsVisible="{Binding ShowStack2}">
                        <!-- AI Recommendation 4 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource PrimaryBlue}">
                            <StackLayout>
                                <Label Text="🌡️ Thermal Efficiency Alert" TextColor="{StaticResource PrimaryBlue}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Ocean temperature rising 2.3°C above seasonal average. Adjust buoy depth settings to maximize thermal gradient energy capture." TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="🔥 Efficiency boost: +12.4 kWh/day" TextColor="{StaticResource AccentGreen}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>

                        <!-- AI Recommendation 5 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource AccentGreen}">
                            <StackLayout>
                                <Label Text="🤖 AI Learning Optimization" TextColor="{StaticResource AccentGreen}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Pattern analysis reveals optimal wave frequency at 0.08 Hz. Recalibrate Buoy Delta's resonance tuning for 22% efficiency improvement." TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="📊 Learning confidence: 94.2%" TextColor="{StaticResource PrimaryBlue}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>

                        <!-- AI Recommendation 6 -->
                        <Frame BackgroundColor="#0F1923" CornerRadius="8" Padding="15" HasShadow="False" BorderColor="{StaticResource WarningOrange}">
                            <StackLayout>
                                <Label Text="🐟 Marine Life Impact" TextColor="{StaticResource WarningOrange}" FontSize="14" FontAttributes="Bold"/>
                                <Label Text="Increased marine activity detected around Buoy Charlie. Implement bio-friendly mode to reduce noise while maintaining 85% energy output." TextColor="White" FontSize="13" LineBreakMode="WordWrap"/>
                                <Label Text="🌿 Eco-balance maintained: -15% noise, -15% output" TextColor="{StaticResource AccentGreen}" FontSize="12" FontAttributes="Bold"/>
                            </StackLayout>
                        </Frame>
                    </StackLayout>
                </StackLayout>
            </Frame>

            <!-- System Status & Alerts -->
            <Frame Grid.Row="5" Style="{StaticResource CardStyle}">
                <StackLayout>
                    <Label Text="🛡️ System Status and Alerts" Style="{StaticResource TitleStyle}" Margin="0,0,0,15"/>
                    <StackLayout Spacing="10">

                        <Grid>
                            <Ellipse Fill="{StaticResource AccentGreen}" WidthRequest="8" HeightRequest="8" HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Text="   ✅ All critical systems operational - Network connectivity: 100%" 
                                   TextColor="{StaticResource AccentGreen}" FontSize="14" VerticalOptions="Center"/>
                        </Grid>

                        <Grid>
                            <Ellipse Fill="{StaticResource WarningOrange}" WidthRequest="8" HeightRequest="8" HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Text="   ⚠️ Buoy Gamma maintenance window: Tomorrow 6:00 AM - 2:00 PM" 
                                   TextColor="{StaticResource WarningOrange}" FontSize="14" VerticalOptions="Center"/>
                        </Grid>

                        <Grid>
                            <Ellipse Fill="{StaticResource PrimaryBlue}" WidthRequest="8" HeightRequest="8" HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Text="   🔄 Firmware update v2.4.1 available for 3 units (performance +5%)" 
                                   TextColor="{StaticResource PrimaryBlue}" FontSize="14" VerticalOptions="Center"/>
                        </Grid>

                        <Grid>
                            <Ellipse Fill="{StaticResource AccentGreen}" WidthRequest="8" HeightRequest="8" HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Text="   📡 Data transmission: 2.4 TB collected | Cloud sync: Active" 
                                   TextColor="{StaticResource TextSecondary}" FontSize="14" VerticalOptions="Center"/>
                        </Grid>

                        <Grid>
                            <Ellipse Fill="{StaticResource PrimaryBlue}" WidthRequest="8" HeightRequest="8" HorizontalOptions="Start" VerticalOptions="Center"/>
                            <Label Text="   🌐 Remote monitoring: 24/7 active | Next inspection: Dec 15" 
                                   TextColor="{StaticResource TextSecondary}" FontSize="14" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>
                </StackLayout>
            </Frame>

        </Grid>
    </ScrollView>
</ContentPage>